{"version":3,"sources":["node_modules/phenomenon/dist/phenomenon.es.js","utils.js","main.js"],"names":["Renderer","classCallCheck","e","r","TypeError","Instance","compileShader","t","i","gl","createShader","shaderSource","prepareProgram","vertex","fragment","n","a","createProgram","attachShader","linkProgram","useProgram","program","prepareUniforms","Object","keys","uniforms","length","getUniformLocation","location","prepareAttributes","geometry","attributes","multiplier","vertices","normal","o","push","name","size","s","f","u","Float32Array","l","c","data","d","h","m","g","modifiers","prepareBuffers","buffers","createBuffer","bindBuffer","bufferData","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","buffer","render","willRender","forEach","value","uniformMap","type","drawArrays","mode","didRender","destroy","deleteBuffer","deleteProgram","assign","x","y","z","canvas","document","querySelector","context","settings","_initialiseProps","call","getContext","alpha","antialias","instances","Map","shouldRender","devicePixelRatio","clearColor","position","float","uniform1f","vec2","uniform2fv","vec3","uniform3fv","vec4","uniform4fv","mat2","uniformMatrix2fv","mat3","uniformMatrix3fv","mat4","uniformMatrix4fv","enable","DEPTH_TEST","depthFunc","LEQUAL","getContextAttributes","apply","clearDepth","window","addEventListener","resize","width","clientWidth","height","clientHeight","drawingBufferWidth","drawingBufferHeight","viewport","uProjectionMatrix","uViewMatrix","uModelMatrix","toggle","clear","requestAnimationFrame","add","JSON","parse","stringify","set","remove","get","delete","rotateX","angle","Math","cos","sin","mv1","mv5","mv9","rotateY","mv0","mv4","mv8","getRandom","floor","random","duration","step","toFixed","forward","phenomenon","Phenomenon","uProgress"],"mappings":"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","file":"main.3823ef7c.map","sourceRoot":"..","sourcesContent":["var classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")},Instance=function(e){var r=this;this.compileShader=function(e,t){var i=r.gl.createShader(e);return r.gl.shaderSource(i,t),r.gl.compileShader(i),i},this.prepareProgram=function(){var e=r.gl,t=r.vertex,i=r.fragment,n=r.compileShader,a=e.createProgram();e.attachShader(a,n(35633,t,e)),e.attachShader(a,n(35632,i,e)),e.linkProgram(a),e.useProgram(a),r.program=a},this.prepareUniforms=function(){for(var e=Object.keys(r.uniforms),t=0;e.length>t;t+=1){var i=r.gl.getUniformLocation(r.program,e[t]);r.uniforms[e[t]].location=i}},this.prepareAttributes=function(){var e=r.geometry,t=r.attributes,i=r.multiplier,n=e.vertices,a=e.normal,o=[\"x\",\"y\",\"z\"];void 0!==n&&r.attributes.push({name:\"aPosition\",size:3}),void 0!==a&&r.attributes.push({name:\"aNormal\",size:3});for(var s=0;t.length>s;s+=1){for(var f=t[s],u=new Float32Array(i*n.length*f.size),l=0;i>l;l+=1)for(var c=f.data&&f.data(l,i),d=l*n.length*f.size,h=0;n.length>h;h+=1)for(var m=0;f.size>m;m+=1){var g=r.modifiers[f.name];u[(d+=1)-1]=void 0!==g?g(c,h,m,r):\"aPosition\"===f.name?n[h][o[m]]:\"aNormal\"===f.name?a[h][o[m]]:c[m]}r.attributes[s].data=u}},this.prepareBuffers=function(){r.buffers=[];for(var e=0;r.attributes.length>e;e+=1){var t=r.attributes[e],i=t.data,n=t.name,a=t.size,o=r.gl.createBuffer();r.gl.bindBuffer(34962,o),r.gl.bufferData(34962,i,35044);var s=r.gl.getAttribLocation(r.program,n);r.gl.enableVertexAttribArray(s),r.gl.vertexAttribPointer(s,a,5126,!1,!1,0),r.buffers.push({buffer:o,location:s,size:a})}},this.render=function(e){var t=r.uniforms,i=r.multiplier,n=r.gl;n.useProgram(r.program),r.willRender&&r.willRender(r);for(var a=0;r.buffers.length>a;a+=1){var o=r.buffers[a],s=o.location,f=o.buffer,u=o.size;n.enableVertexAttribArray(s),n.bindBuffer(34962,f),n.vertexAttribPointer(s,u,5126,!1,!1,0)}Object.keys(e).forEach(function(r){t[r].value=e[r].value}),Object.keys(t).forEach(function(e){var i=t[e];r.uniformMap[i.type](i.location,i.value)}),n.drawArrays(r.mode,0,i*r.geometry.vertices.length),r.didRender&&r.didRender(r)},this.destroy=function(){for(var e=0;r.buffers.length>e;e+=1)r.gl.deleteBuffer(r.buffers.buffer);r.gl.deleteProgram(r.program),r.gl=null},Object.assign(this,{uniforms:{},geometry:{vertices:[{x:0,y:0,z:0}]},mode:0,modifiers:{}}),Object.assign(this,e),this.prepareProgram(),this.prepareUniforms(),this.prepareAttributes(),this.prepareBuffers()},Renderer=function(e){var r=e.canvas,t=void 0===r?document.querySelector(\"canvas\"):r,i=e.context,n=void 0===i?{}:i,a=e.settings,o=void 0===a?{}:a;_initialiseProps.call(this);var s=t.getContext(\"webgl\",Object.assign({alpha:!1,antialias:!1},n));Object.assign(this,{gl:s,canvas:t,uniforms:{},instances:new Map,shouldRender:!0}),Object.assign(this,{devicePixelRatio:1,clearColor:[1,1,1,1],position:{x:0,y:0,z:2}}),Object.assign(this,o),this.uniformMap={float:function(e,r){return s.uniform1f(e,r)},vec2:function(e,r){return s.uniform2fv(e,r)},vec3:function(e,r){return s.uniform3fv(e,r)},vec4:function(e,r){return s.uniform4fv(e,r)},mat2:function(e,r){return s.uniformMatrix2fv(e,!1,r)},mat3:function(e,r){return s.uniformMatrix3fv(e,!1,r)},mat4:function(e,r){return s.uniformMatrix4fv(e,!1,r)}},s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL),!1===s.getContextAttributes().alpha&&(s.clearColor.apply(s,this.clearColor),s.clearDepth(1)),window.addEventListener(\"resize\",this.resize),this.resize(),this.render()},_initialiseProps=function(){var e=this;this.resize=function(){var r=e.gl,t=e.canvas,i=e.devicePixelRatio,n=e.position;t.width=t.clientWidth*i,t.height=t.clientHeight*i;var a=r.drawingBufferWidth,o=r.drawingBufferHeight,s=a/o;r.viewport(0,0,a,o);var f=.41421356237309503,u=[1,0,0,0,0,1,0,0,0,0,1,0,n.x,n.y,(1>s?1:s)*-n.z,1];e.uniforms.uProjectionMatrix={type:\"mat4\",value:[.5/f,0,0,0,0,s/f*.5,0,0,0,0,-100.001/99.999,-1,0,0,.001/99.999*-200,0]},e.uniforms.uViewMatrix={type:\"mat4\",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e.uniforms.uModelMatrix={type:\"mat4\",value:u}},this.toggle=function(r){r!==e.shouldRender&&(e.shouldRender=void 0!==r?r:!e.shouldRender,e.shouldRender&&e.render())},this.render=function(){e.gl.clear(16640),e.willRender&&e.willRender(e),e.instances.forEach(function(r){r.render(e.uniforms)}),e.didRender&&e.didRender(e),e.shouldRender&&requestAnimationFrame(e.render)},this.add=function(r,t){t.uniforms=t.uniforms||{},t.uniforms=Object.assign(t.uniforms,JSON.parse(JSON.stringify(e.uniforms))),Object.assign(t,{gl:e.gl,uniformMap:e.uniformMap});var i=new Instance(t);e.instances.set(r,i)},this.remove=function(r){var t=e.instances.get(r);void 0!==t&&(t.destroy(),e.instances.delete(r))},this.destroy=function(){e.instances.forEach(function(r,t){r.destroy(),e.instances.delete(t)})}};export default Renderer;\n","export function rotateX(m, angle) {\n\tlet c = Math.cos(angle);\n\tlet s = Math.sin(angle);\n\tlet mv1 = m[1];\n\tlet mv5 = m[5];\n\tlet mv9 = m[9];\n\n\tm[1] = m[1] * c - m[2] * s;\n\tm[5] = m[5] * c - m[6] * s;\n\tm[9] = m[9] * c - m[10] * s;\n\n\tm[2] = m[2] * c + mv1 * s;\n\tm[6] = m[6] * c + mv5 * s;\n\tm[10] = m[10] * c + mv9 * s;\n}\n\nexport function rotateY(m, angle) {\n\tlet c = Math.cos(angle);\n\tlet s = Math.sin(angle);\n\tlet mv0 = m[0];\n\tlet mv4 = m[4];\n\tlet mv8 = m[8];\n\n\tm[0] = c * m[0] + s * m[2];\n\tm[4] = c * m[4] + s * m[6];\n\tm[8] = c * m[8] + s * m[10];\n\n\tm[2] = c * m[2] - s * mv0;\n\tm[6] = c * m[6] - s * mv4;\n\tm[10] = c * m[10] - s * mv8;\n}\n\nexport function getRandom(value) {\n\tconst floor = -value;\n\treturn floor + Math.random() * value * 2;\n}","import Phenomenon from 'phenomenon';\n\n// Import optional utils\nimport { getRandom, rotateX, rotateY } from './utils';\n\n// The amount of particles that will be created\nconst multiplier = 400000;\n\n// Percentage of how long every particle will move\nconst duration = 0.9;\n\n// Update value for every frame\nconst step = 0.01;\n\n// Multiplier of the canvas resolution\nconst devicePixelRatio = 1;\n\n// Every attribute must have:\n// - Name (used in the shader)\n// - Data (returns data for every particle)\n// - Size (amount of variables in the data)\nconst attributes = [\n\t{\n\t\tname: 'aPositionStart',\n\t\tdata: () => [getRandom(0.5), getRandom(0.5), getRandom(0.5)],\n\t\tsize: 3,\n\t},\n\t{\n\t\tname: 'aPositionEnd',\n\t\tdata: () => [getRandom(1.5), getRandom(1.5), getRandom(1.5)],\n\t\tsize: 3,\n\t},\n\t{\n\t\tname: 'aColor',\n\t\tdata: () => Math.random() > 0.5 ? [29 / 255, 233 / 255, 182 / 255, 1] : [4 / 255, 208 / 255, 157 / 255, 1],\n\t\tsize: 3,\n\t},\n\t{\n\t\tname: 'aOffset',\n\t\tdata: i => [i * ((1 - duration) / (multiplier - 1))],\n\t\tsize: 1,\n\t},\n];\n\n// Every uniform must have:\n// - Key (used in the shader)\n// - Type (what kind of value)\n// - Value (based on the type)\nconst uniforms = {\n\tuProgress: {\n\t\ttype: 'float',\n\t\tvalue: 0.0,\n\t},\n};\n\n// Vertex shader used to calculate the position\nconst vertex = `\n  attribute vec3 aPositionStart;\n  attribute vec3 aControlPointOne;\n  attribute vec3 aControlPointTwo;\n  attribute vec3 aPositionEnd;\n  attribute vec3 aPosition;\n  attribute vec3 aColor;\n  attribute float aOffset;\n\n  uniform float uProgress;\n  uniform mat4 uProjectionMatrix;\n  uniform mat4 uModelMatrix;\n  uniform mat4 uViewMatrix;\n\n  varying vec3 vColor;\n\n  float easeInOutQuint(float t){\n    return t < 0.5 ? 16.0 * t * t * t * t * t : 1.0 + 16.0 * (--t) * t * t * t * t;\n  }\n\n  void main(){\n    float tProgress = easeInOutQuint(min(1.0, max(0.0, (uProgress - aOffset)) / ${duration}));\n    vec3 newPosition = mix(aPositionStart, aPositionEnd, tProgress);\n    gl_Position = uProjectionMatrix * uModelMatrix * uViewMatrix * vec4(newPosition + aPosition, 1.0);\n    gl_PointSize = ${devicePixelRatio.toFixed(1)};\n    vColor = aColor;\n  }\n`;\n\n// Fragment shader to draw the colored pixels to the canvas\nconst fragment = `\n  precision mediump float;\n\n  varying vec3 vColor;\n\n  void main(){\n    gl_FragColor = vec4(vColor, 1.0);\n  }\n`;\n\n// Boolean value to switch direction\nlet forward = true;\n\n// Create the renderer\nconst phenomenon = new Phenomenon({\n\tsettings: {\n\t\tdevicePixelRatio,\n\t\tposition: { x: 0, y: 0, z: 3 },\n\t\tshouldRender: true,\n\t\tuniforms,\n\t\twillRender: r => {\n\t\t\tconst { uProgress, uModelMatrix } = r.uniforms;\n\t\t\tuProgress.value += forward ? step : -step;\n\n\t\t\tif (uProgress.value >= 1) forward = false;\n\t\t\telse if (uProgress.value <= 0) forward = true;\n\n\t\t\trotateY(uModelMatrix.value, step * 2);\n\t\t\trotateX(uModelMatrix.value, step * 2);\n\t\t},\n\t},\n});\n\n// Add an instance to the renderer\nphenomenon.add('cube', {\n\tattributes,\n\tmultiplier,\n\tvertex,\n\tfragment,\n});"]}